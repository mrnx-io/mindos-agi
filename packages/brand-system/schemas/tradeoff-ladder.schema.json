{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "version": "1.0.0",
  "description": "Tradeoff Ladder output schema",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "metadata",
    "tradeoff_ladder"
  ],
  "properties": {
    "tradeoff_ladder": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "lf8_conflict_resolution",
        "ranked_principles",
        "collision_log",
        "override_clause",
        "unlosable_frames",
        "derivation_log"
      ],
      "properties": {
        "lf8_conflict_resolution": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "primary_vs_secondary",
            "biological_override_rule",
            "example_conflicts"
          ],
          "properties": {
            "primary_vs_secondary": {
              "type": "string",
              "minLength": 1
            },
            "biological_override_rule": {
              "type": "string",
              "minLength": 1
            },
            "example_conflicts": {
              "$ref": "./_defs.json#/definitions/string_list",
              "minItems": 1
            }
          }
        },
        "ranked_principles": {
          "type": "array",
          "minItems": 5,
          "maxItems": 9,
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "rank",
              "principle",
              "source",
              "permits",
              "forbids",
              "failure_signature",
              "unlosable_frame"
            ],
            "properties": {
              "rank": {
                "type": "integer"
              },
              "principle": {
                "type": "string",
                "minLength": 1
              },
              "source": {
                "type": "string",
                "enum": [
                  "manifesto",
                  "covenant",
                  "sumi_breath"
                ]
              },
              "permits": {
                "$ref": "./_defs.json#/definitions/string_list"
              },
              "forbids": {
                "$ref": "./_defs.json#/definitions/string_list"
              },
              "failure_signature": {
                "type": "string",
                "minLength": 1
              },
              "unlosable_frame": {
                "type": "string",
                "minLength": 1
              }
            }
          }
        },
        "collision_log": {
          "type": "array",
          "minItems": 3,
          "maxItems": 5,
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "name",
              "conflict",
              "principle_a",
              "principle_b",
              "resolution",
              "cost_accepted",
              "unlosable_frame",
              "precedent_established"
            ],
            "properties": {
              "name": {
                "type": "string",
                "minLength": 1
              },
              "conflict": {
                "type": "string",
                "minLength": 1
              },
              "principle_a": {
                "type": "object"
              },
              "principle_b": {
                "type": "object"
              },
              "resolution": {
                "type": "string",
                "minLength": 1
              },
              "cost_accepted": {
                "type": "string",
                "minLength": 1
              },
              "unlosable_frame": {
                "type": "string",
                "minLength": 1
              },
              "precedent_established": {
                "type": "string",
                "minLength": 1
              }
            }
          }
        },
        "override_clause": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "condition",
            "when_applies",
            "authority",
            "return_criteria"
          ],
          "properties": {
            "condition": {
              "type": "string",
              "minLength": 1
            },
            "when_applies": {
              "$ref": "./_defs.json#/definitions/string_list",
              "minItems": 1
            },
            "authority": {
              "type": "string",
              "minLength": 1
            },
            "return_criteria": {
              "type": "string",
              "minLength": 1
            }
          }
        },
        "unlosable_frames": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "sacrifice",
              "gain"
            ],
            "properties": {
              "sacrifice": {
                "type": "string",
                "minLength": 1
              },
              "gain": {
                "type": "string",
                "minLength": 1
              }
            }
          }
        },
        "derivation_log": {
          "$ref": "./_defs.json#/definitions/derivation_log"
        }
      }
    },
    "metadata": {
      "$ref": "./provenance.schema.json"
    }
  }
}
